<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Enhanced SEO Meta Tags -->
  <title>Free Online Image Resizer Tool - Resize Photos Instantly | Professional Quality</title>
  <meta name="description"
    content="Resize images online for free with our professional image resizer tool. Support for JPG, PNG, WebP formats. Maintain quality while reducing file size. No watermarks, instant download." />
  <meta name="keywords"
    content="image resizer, photo resizer, resize images online, compress images, image optimizer, free image tool, batch resize, maintain quality" />
  <meta name="author" content="Your Site Name" />
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />

  <!-- Open Graph / Social Media -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Free Online Image Resizer Tool - Resize Photos Instantly" />
  <meta property="og:description"
    content="Professional quality image resizing tool. Support for JPG, PNG, WebP. Free, fast, and no watermarks." />
  <meta property="og:image" content="/og-image.jpg" />
  <meta property="og:url" content="https://www.freeresizenow.com/" />
  <meta property="og:site_name" content="Your Image Resizer" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Free Online Image Resizer Tool" />
  <meta name="twitter:description" content="Resize images online for free with professional quality results" />
  <meta name="twitter:image" content="/twitter-image.jpg" />

  <!-- Canonical URL -->
  <link rel="canonical" href="https://www.freeresizenow.com//" />

  <!-- Hreflang for multilingual support -->
  <link rel="alternate" hreflang="en" href="https://www.freeresizenow.com//en" />
  <link rel="alternate" hreflang="pt" href="https://www.freeresizenow.com//pt" />
  <link rel="alternate" hreflang="x-default" href="https://www.freeresizenow.com//" />

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />

  <!-- Preload critical resources -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    as="style" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" />

  <!-- Structured Data Schema -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Free Image Resizer Tool",
      "description": "Professional online image resizer tool that supports JPG, PNG, WebP formats with quality preservation",
      "url": "https://www.freeresizenow.com/",
      "applicationCategory": "MultimediaApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "provider": {
        "@type": "Organization",
        "name": "Your Company Name",
        "url": "https://www.freeresizenow.com/"
      },
      "featureList": [
        "Resize images online",
        "Support for JPG, PNG, WebP formats",
        "Maintain image quality",
        "Batch processing",
        "No watermarks",
        "Instant download",
        "Multiple preset sizes",
        "Custom dimensions"
      ],
      "softwareVersion": "2.0",
      "dateModified": "2025-08-26",
      "browserRequirements": "Requires HTML5 support"
    }
    </script>

  <!-- Enhanced styles with performance optimizations -->
  <style>
    /* Critical CSS - inline for faster loading */
    * {
      box-sizing: border-box;
    }

    body {
      font-family: "Inter", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
      font-display: swap;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
    }

    /* SEO-friendly header structure */
    .header {
      text-align: center;
      margin-bottom: 30px;
    }

    .header h1 {
      font-size: 2.5em;
      margin: 0 0 10px 0;
      background: linear-gradient(45deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 700;
    }

    .header .subtitle {
      font-size: 1.2em;
      color: #666;
      margin-bottom: 20px;
      font-weight: 400;
    }

    /* Breadcrumbs for better navigation */
    .breadcrumbs {
      margin-bottom: 20px;
      font-size: 0.9em;
      color: #666;
    }

    .breadcrumbs a {
      color: #667eea;
      text-decoration: none;
    }

    .breadcrumbs a:hover {
      text-decoration: underline;
    }

    .lang-btn {
      margin: 10px 5px;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 25px;
      border: none;
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .lang-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .main-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }

    @media (max-width: 768px) {
      .main-content {
        grid-template-columns: 1fr;
      }
    }

    .upload-section,
    .preview-section {
      background: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    }

    /* SEO-friendly section headers */
    .section-title {
      font-size: 1.5em;
      font-weight: 600;
      margin-bottom: 20px;
      color: #333;
    }

    .drop-zone {
      border: 3px dashed #ccc;
      border-radius: 15px;
      padding: 40px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      min-height: 200px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .drop-zone:hover,
    .drop-zone.dragover {
      border-color: #667eea;
      background: rgba(102, 126, 234, 0.05);
      transform: scale(1.02);
    }

    .drop-zone.has-file {
      border-color: #4caf50;
      background: rgba(76, 175, 80, 0.05);
    }

    .drop-zone input[type="file"] {
      position: absolute;
      opacity: 0;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }

    .drop-text {
      font-size: 1.2em;
      color: #666;
      margin-top: 10px;
    }

    .file-info {
      margin-top: 15px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 10px;
      display: none;
    }

    .controls {
      margin: 20px 0;
    }

    .mode-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
    }

    .mode-btn {
      padding: 12px 24px;
      border: 2px solid #ddd;
      background: white;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .mode-btn.active {
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      border-color: transparent;
    }

    .presets {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 15px 0;
      justify-content: center;
    }

    .preset-btn {
      padding: 8px 16px;
      background: #f1f3f4;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 0.9em;
      transition: all 0.3s ease;
    }

    .preset-btn:hover {
      background: #e8eaed;
      transform: translateY(-1px);
    }

    .input-group {
      display: flex;
      gap: 15px;
      align-items: center;
      margin: 15px 0;
      flex-wrap: wrap;
      justify-content: center;
    }

    .input-group input,
    .input-group select {
      padding: 12px;
      border: 2px solid #e1e5e9;
      border-radius: 10px;
      font-size: 16px;
      transition: border-color 0.3s ease;
    }

    .input-group input:focus,
    .input-group select:focus {
      outline: none;
      border-color: #667eea;
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 15px 0;
      justify-content: center;
    }

    .quality-control {
      margin: 15px 0;
      text-align: center;
    }

    .quality-slider {
      width: 200px;
      margin: 10px;
    }

    .process-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(45deg, #4caf50, #45a049);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 20px 0;
    }

    .process-btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
    }

    .process-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .preview-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }

    .preview-box {
      text-align: center;
    }

    .preview-box h4 {
      margin: 0 0 10px 0;
      color: #666;
    }

    .preview-image {
      max-width: 100%;
      max-height: 200px;
      border: 2px solid #e1e5e9;
      border-radius: 10px;
      object-fit: contain;
    }

    .image-info {
      background: #f8f9fa;
      padding: 10px;
      border-radius: 8px;
      margin-top: 10px;
      font-size: 0.9em;
    }

    .download-btn {
      display: none;
      width: 100%;
      padding: 15px;
      background: linear-gradient(45deg, #2196f3, #21cbf3);
      color: white;
      text-decoration: none;
      border-radius: 12px;
      font-size: 1.1em;
      font-weight: bold;
      margin-top: 20px;
      text-align: center;
      transition: all 0.3s ease;
    }

    .download-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
    }

    /* FAQ Section for SEO */
    .faq-section {
      margin: 40px 0;
      padding: 30px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    }

    .faq-item {
      margin-bottom: 20px;
      border-bottom: 1px solid #eee;
      padding-bottom: 20px;
    }

    .faq-question {
      font-weight: 600;
      font-size: 1.1em;
      margin-bottom: 10px;
      color: #333;
    }

    .faq-answer {
      color: #666;
      line-height: 1.6;
    }

    /* Features section */
    .features-section {
      margin: 40px 0;
      padding: 30px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .feature-item {
      text-align: center;
      padding: 20px;
      border-radius: 10px;
      background: #f8f9fa;
    }

    .feature-icon {
      font-size: 2em;
      margin-bottom: 10px;
    }

    .feature-title {
      font-weight: 600;
      margin-bottom: 10px;
      color: #333;
    }

    .feature-desc {
      color: #666;
      font-size: 0.9em;
    }

    .loading {
      display: none;
      text-align: center;
      margin: 20px 0;
    }

    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 10px;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .error-message {
      background: #ffebee;
      color: #c62828;
      padding: 10px;
      border-radius: 8px;
      margin: 10px 0;
      display: none;
    }

    .history {
      margin-top: 30px;
      padding: 20px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    }

    .history-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid #eee;
    }

    .hidden {
      display: none !important;
    }

    #widthInput::-webkit-input-placeholder,
    #heightInput::-webkit-input-placeholder {
      font-size: 12px;
    }

  </style>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WV8D64VVTB"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-WV8D64VVTB');
  </script>

  <meta name="google-site-verification" content="TjaZaFK_cd3N_yWFkVu7Qigv4ogRv1ESpZIuEGra8Sw" />

</head>
<body>
  <div class="container">
    <!-- Breadcrumbs for better navigation
    <nav class="breadcrumbs">
      <a href="/">Home</a> > <span>Image Resizer</span>
    </nav> -->

    <!-- Enhanced Header with SEO structure -->
    <header class="header">
      <div class="language-selector">
        <button class="lang-btn" onclick="setLanguage('en')" aria-label="Switch to English">English</button>
        <button class="lang-btn" onclick="setLanguage('pt')" aria-label="Mudar para Português">Português</button>
      </div>

      <h1 id="title">Free Online Image Resizer Tool - Resize Photos Instantly</h1>
      <p class="subtitle" id="subtitle">
        Professional quality image resizing with support for JPG, PNG, WebP. No watermarks, instant download.
      </p>
    </header>

    <!-- Main Content Grid -->
    <main class="main-content">
      <!-- Upload Section -->
      <section class="upload-section" aria-label="Image Upload">
        <h2 class="section-title" id="uploadTitle">Upload Your Image</h2>

        <div class="drop-zone" id="dropZone" role="button" tabindex="0" aria-label="Upload image file">
          <input type="file" id="fileInput" accept="image/*" multiple aria-describedby="dropHint" />
          <div style="font-size: 3em" aria-hidden="true">📁</div>
          <div class="drop-text" id="dropText">
            Click or drag an image here
          </div>
          <small id="dropHint">
            Supported formats: JPG, PNG, WebP, GIF (max: 10MB)
          </small>
        </div>

        <div class="file-info" id="fileInfo" role="status">
          <strong id="fileName"></strong><br />
          <span id="fileSize"></span> • <span id="fileDimensions"></span>
        </div>

        <div class="error-message" id="errorMessage" role="alert"></div>

        <!-- Mode Selection -->
        <div class="controls">
          <div class="mode-buttons" role="tablist">
            <button class="mode-btn active" onclick="setMode('dimension')" id="btnDimension" role="tab"
              aria-selected="true">
              Custom Dimensions
            </button>
            <button class="mode-btn" onclick="setMode('percentage')" id="btnPercentage" role="tab"
              aria-selected="false">
              Percentage Resize
            </button>
          </div>

          <!-- Presets -->
          <div class="presets" id="presets">
            <button class="preset-btn" onclick="setPreset(1080, 1080)">
              Instagram Square (1080×1080)
            </button>
            <button class="preset-btn" onclick="setPreset(1920, 1080)">
              Full HD (1920×1080)
            </button>
            <button class="preset-btn" onclick="setPreset(1280, 720)">
              YouTube Thumbnail (1280×720)
            </button>
            <button class="preset-btn" onclick="setPreset(800, 600)">
              Web Optimized (800×600)
            </button>
          </div>

          <!-- Dimension Controls -->
          <div class="input-group" id="dimensionControls">
            <label for="widthInput" class="sr-only">Width</label>
            <input type="number" id="widthInput" placeholder="Width (px)" min="1" max="9999"
              aria-label="Image width in pixels" />
            <span>×</span>
            <label for="heightInput" class="sr-only">Height</label>
            <input type="number" id="heightInput" placeholder="Height (px)" min="1" max="9999"
              aria-label="Image height in pixels" />
          </div>

          <!-- Percentage Controls -->
          <div class="input-group hidden" id="percentageControls">
            <label for="percentInput" class="sr-only">Percentage</label>
            <input type="number" id="percentInput" placeholder="%" min="1" max="500" aria-label="Resize percentage" />
            <span id="percentLabel">% of original size</span>
          </div>

          <div class="checkbox-group">
            <input type="checkbox" id="keepRatio" checked />
            <label for="keepRatio" id="ratioLabel">Maintain aspect ratio</label>
          </div>

          <!-- Format and Quality -->
          <div class="input-group">
            <label for="formatSelect" class="sr-only">Output format</label>
            <select id="formatSelect" aria-label="Choose output image format">
              <option value="image/jpeg">JPEG (Smaller file size)</option>
              <option value="image/png">PNG (Transparency support)</option>
              <option value="image/webp">WebP (Best compression)</option>
            </select>
          </div>

          <div class="quality-control" id="qualityControl">
            <label for="qualitySlider" id="qualityLabel">
              Quality: <span id="qualityValue">90</span>%
            </label><br />
            <input type="range" id="qualitySlider" class="quality-slider" min="10" max="100" value="90"
              aria-label="Image quality slider" />
          </div>
        </div>

        <button class="process-btn" id="processBtn" onclick="processImage()" disabled type="button">
          <span id="processText">Resize Image</span>
        </button>

        <div class="loading" id="loading" role="status" aria-live="polite">
          <div class="spinner" aria-hidden="true"></div>
          <div id="loadingText">Processing your image...</div>
        </div>
      </section>

      <!-- Preview Section -->
      <section class="preview-section" aria-label="Image Preview">
        <h2 class="section-title" id="previewTitle">Before & After Preview</h2>

        <div class="preview-container">
          <div class="preview-box">
            <h3 id="originalLabel">Original Image</h3>
            <img id="originalPreview" class="preview-image" style="display: none" alt="Original image preview" />
            <div class="image-info" id="originalInfo" role="status">
              No image loaded
            </div>
          </div>

          <div class="preview-box">
            <h3 id="processedLabel">Resized Image</h3>
            <img id="processedPreview" class="preview-image" style="display: none" alt="Resized image preview" />
            <div class="image-info" id="processedInfo" role="status">
              Waiting for processing
            </div>
          </div>
        </div>

        <a class="download-btn" id="downloadBtn" download="resized-image" role="button">
          📥 <span id="downloadText">Download Resized Image</span>
        </a>
      </section>
    </main>

    <!-- Features Section for SEO -->
    <section class="features-section">
      <h2>Why Choose Our Image Resizer?</h2>
      <div class="features-grid">
        <div class="feature-item">
          <div class="feature-icon">🚀</div>
          <h3 class="feature-title">Lightning Fast</h3>
          <p class="feature-desc">Process images instantly with our optimized compression algorithm</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">🎨</div>
          <h3 class="feature-title">Professional Quality</h3>
          <p class="feature-desc">Maintain image quality while reducing file size significantly</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">🔒</div>
          <h3 class="feature-title">100% Secure</h3>
          <p class="feature-desc">Images are processed locally in your browser - never uploaded to servers</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">📱</div>
          <h3 class="feature-title">Mobile Friendly</h3>
          <p class="feature-desc">Works perfectly on desktop, tablet, and mobile devices</p>
        </div>
      </div>
    </section>

    <!-- FAQ Section for SEO -->
    <section class="faq-section">
      <h2>Frequently Asked Questions</h2>

      <article class="faq-item">
        <h3 class="faq-question">How do I resize an image online for free?</h3>
        <p class="faq-answer">Simply upload your image using our tool, choose your desired dimensions or percentage, and
          click resize. Our tool supports JPG, PNG, WebP, and GIF formats up to 10MB.</p>
      </article>

      <article class="faq-item">
        <h3 class="faq-question">What image formats are supported?</h3>
        <p class="faq-answer">We support all popular image formats including JPEG, PNG, WebP, and GIF. You can also
          convert between formats during the resize process.</p>
      </article>

      <article class="faq-item">
        <h3 class="faq-question">Will resizing reduce image quality?</h3>
        <p class="faq-answer">Our advanced algorithm maintains maximum image quality while reducing file size. You can
          control the quality level with our quality slider for JPEG images.</p>
      </article>

      <article class="faq-item">
        <h3 class="faq-question">Is it safe to resize images online?</h3>
        <p class="faq-answer">Yes! Our tool processes images entirely in your browser. Your images are never uploaded to
          our servers, ensuring complete privacy and security.</p>
      </article>


    </section>

    <!-- History -->
    <div class="history" id="history" style="display: none">
      <h3 id="historyTitle">Recent Resize History</h3>
      <div id="historyList"></div>
    </div>
  </div>

  <canvas id="canvas" style="display: none"></canvas>

  <script>
    let originalImage = null;
    let currentMode = "dimension";
    let aspectRatio = 1;
    let originalFile = null;
    let processHistory = [];
    let lang = "en";

    const translations = {
      pt: {
        title: "Redimensionador de Imagem Online Gratuito - Redimensione Fotos Instantaneamente",
        subtitle: "Redimensionamento de imagens com qualidade profissional com suporte para JPG, PNG, WebP. Sem marcas d'água, download instantâneo.",
        uploadTitle: "Faça Upload da Sua Imagem",
        previewTitle: "Visualização Antes e Depois",
        dropText: "Clique ou arraste uma imagem aqui",
        dropHint: "Formatos suportados: JPG, PNG, WebP, GIF (máx: 10MB)",
        btnDimension: "Dimensões Personalizadas",
        btnPercentage: "Redimensionar por Porcentagem",
        ratioLabel: "Manter proporção",
        qualityLabel: "Qualidade",
        processText: "Redimensionar Imagem",
        loadingText: "Processando sua imagem...",
        originalLabel: "Imagem Original",
        processedLabel: "Imagem Redimensionada",
        downloadText: "Baixar Imagem Redimensionada",
        historyTitle: "Histórico de Redimensionamentos",
        percentLabel: "% do tamanho original",
        errorFileSize: "Arquivo muito grande (máx: 10MB)",
        errorFileType: "Formato de arquivo não suportado",
        errorProcessing: "Erro ao processar imagem",
        infoNoImage: "Nenhuma imagem carregada",
        infoWaiting: "Aguardando processamento",
      },
      en: {
        title: "Free Online Image Resizer Tool - Resize Photos Instantly",
        subtitle: "Professional quality image resizing with support for JPG, PNG, WebP. No watermarks, instant download.",
        uploadTitle: "Upload Your Image",
        previewTitle: "Before & After Preview",
        dropText: "Click or drag an image here",
        dropHint: "Supported formats: JPG, PNG, WebP, GIF (max: 10MB)",
        btnDimension: "Custom Dimensions",
        btnPercentage: "Percentage Resize",
        ratioLabel: "Maintain aspect ratio",
        qualityLabel: "Quality",
        processText: "Resize Image",
        loadingText: "Processing your image...",
        originalLabel: "Original Image",
        processedLabel: "Resized Image",
        downloadText: "Download Resized Image",
        historyTitle: "Recent Resize History",
        percentLabel: "% of original size",
        errorFileSize: "File too large (max: 10MB)",
        errorFileType: "Unsupported file format",
        errorProcessing: "Error processing image",
        infoNoImage: "No image loaded",
        infoWaiting: "Waiting for processing",
      },
    };

    // Language switching with SEO benefits
    function setLanguage(selectedLang) {
      lang = selectedLang;
      const t = translations[lang];

      // Update page title and meta description dynamically
      document.title = t.title;
      document.querySelector('meta[name="description"]').content = t.subtitle;

      document.getElementById("title").textContent = t.title;
      document.getElementById("subtitle").textContent = t.subtitle;
      document.getElementById("uploadTitle").textContent = t.uploadTitle;
      document.getElementById("previewTitle").textContent = t.previewTitle;
      document.getElementById("dropText").textContent = t.dropText;
      document.getElementById("dropHint").textContent = t.dropHint;
      document.getElementById("btnDimension").textContent = t.btnDimension;
      document.getElementById("btnPercentage").textContent = t.btnPercentage;
      document.getElementById("ratioLabel").textContent = t.ratioLabel;
      document.getElementById("processText").textContent = t.processText;
      document.getElementById("loadingText").textContent = t.loadingText;
      document.getElementById("originalLabel").textContent = t.originalLabel;
      document.getElementById("processedLabel").textContent = t.processedLabel;
      document.getElementById("downloadText").textContent = t.downloadText;
      document.getElementById("historyTitle").textContent = t.historyTitle;
      document.getElementById("percentLabel").textContent = t.percentLabel;

      updateQualityLabel();
      updateImageInfo();

      // Update HTML lang attribute for SEO
      document.documentElement.lang = selectedLang;

      // Track language changes for analytics
      if (typeof gtag !== 'undefined') {
        gtag('event', 'language_change', {
          'language': selectedLang
        });
      }
    }

    // Enhanced drag and drop functionality
    const dropZone = document.getElementById("dropZone");
    const fileInput = document.getElementById("fileInput");

    ["dragenter", "dragover", "dragleave", "drop"].forEach((eventName) => {
      dropZone.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    ["dragenter", "dragover"].forEach((eventName) => {
      dropZone.addEventListener(
        eventName,
        () => dropZone.classList.add("dragover"),
        false
      );
    });

    ["dragleave", "drop"].forEach((eventName) => {
      dropZone.addEventListener(
        eventName,
        () => dropZone.classList.remove("dragover"),
        false
      );
    });

    dropZone.addEventListener("drop", handleDrop, false);
    fileInput.addEventListener("change", handleFileSelect, false);

    // Keyboard accessibility
    dropZone.addEventListener("keydown", function (e) {
      if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        fileInput.click();
      }
    });

    function handleDrop(e) {
      const dt = e.dataTransfer;
      const files = dt.files;
      handleFiles(files);

      // Track file drop for analytics
      if (typeof gtag !== 'undefined') {
        gtag('event', 'file_drop', {
          'event_category': 'engagement',
          'event_label': 'drag_and_drop'
        });
      }
    }

    function handleFileSelect(e) {
      handleFiles(e.target.files);
    }

    function handleFiles(files) {
      if (files.length === 0) return;

      const file = files[0];

      // Enhanced validation
      if (file.size > 10 * 1024 * 1024) {
        showError(translations[lang].errorFileSize);
        return;
      }

      if (!file.type.startsWith("image/")) {
        showError(translations[lang].errorFileType);
        return;
      }

      hideError();
      loadImage(file);

      // Track successful file upload
      if (typeof gtag !== 'undefined') {
        gtag('event', 'file_upload', {
          'event_category': 'engagement',
          'file_type': file.type,
          'file_size': Math.round(file.size / 1024) // KB
        });
      }
    }

    function loadImage(file) {
      originalFile = file;

      // Update file info
      document.getElementById("fileName").textContent = file.name;
      document.getElementById("fileSize").textContent = formatBytes(file.size);
      document.getElementById("fileInfo").style.display = "block";

      // Update drop zone
      dropZone.classList.add("has-file");

      // Load image for preview and processing
      const reader = new FileReader();
      reader.onload = function (e) {
        originalImage = new Image();
        originalImage.onload = function () {
          aspectRatio = this.width / this.height;

          // Update UI
          document.getElementById("fileDimensions").textContent = `${this.width} × ${this.height}px`;
          document.getElementById("originalPreview").src = e.target.result;
          document.getElementById("originalPreview").style.display = "block";
          document.getElementById("processBtn").disabled = false;

          // Set default dimensions
          document.getElementById("widthInput").value = this.width;
          document.getElementById("heightInput").value = this.height;

          updateImageInfo();
        };
        originalImage.src = e.target.result;
      };
      reader.readAsDataURL(file);
    }

    // Mode switching
    function setMode(mode) {
      currentMode = mode;

      // Update buttons
      document.querySelectorAll(".mode-btn").forEach((btn) => {
        btn.classList.remove("active");
        btn.setAttribute("aria-selected", "false");
      });

      const activeBtn = document.getElementById(mode === "dimension" ? "btnDimension" : "btnPercentage");
      activeBtn.classList.add("active");
      activeBtn.setAttribute("aria-selected", "true");

      // Show/hide controls
      if (mode === "dimension") {
        document.getElementById("dimensionControls").classList.remove("hidden");
        document.getElementById("percentageControls").classList.add("hidden");
        document.getElementById("presets").style.display = "flex";
      } else {
        document.getElementById("dimensionControls").classList.add("hidden");
        document.getElementById("percentageControls").classList.remove("hidden");
        document.getElementById("presets").style.display = "none";
      }

      // Track mode changes
      if (typeof gtag !== 'undefined') {
        gtag('event', 'mode_change', {
          'event_category': 'engagement',
          'mode': mode
        });
      }
    }

    // Preset buttons with enhanced tracking
    function setPreset(width, height) {
      document.getElementById("widthInput").value = width;
      document.getElementById("heightInput").value = height;
      setMode("dimension");

      // Track preset usage
      if (typeof gtag !== 'undefined') {
        gtag('event', 'preset_used', {
          'event_category': 'engagement',
          'preset': `${width}x${height}`
        });
      }
    }

    // Aspect ratio maintenance
    document.getElementById("widthInput").addEventListener("input", function () {
      if (document.getElementById("keepRatio").checked && originalImage && this.value) {
        const newHeight = Math.round(this.value / aspectRatio);
        document.getElementById("heightInput").value = newHeight;
      }
    });

    document.getElementById("heightInput").addEventListener("input", function () {
      if (document.getElementById("keepRatio").checked && originalImage && this.value) {
        const newWidth = Math.round(this.value * aspectRatio);
        document.getElementById("widthInput").value = newWidth;
      }
    });

    // Quality slider
    document.getElementById("qualitySlider").addEventListener("input", updateQualityLabel);

    function updateQualityLabel() {
      const quality = document.getElementById("qualitySlider").value;
      document.getElementById("qualityValue").textContent = quality;
    }

    // Format change handler
    document.getElementById("formatSelect").addEventListener("change", function () {
      const qualityControl = document.getElementById("qualityControl");
      qualityControl.style.display = this.value === "image/jpeg" ? "block" : "none";
    });

    // Enhanced processing function with performance monitoring
    async function processImage() {
      if (!originalImage) return;

      const startTime = performance.now();
      showLoading(true);

      try {
        let newWidth, newHeight;

        if (currentMode === "dimension") {
          newWidth = parseInt(document.getElementById("widthInput").value) || originalImage.width;
          newHeight = parseInt(document.getElementById("heightInput").value) || originalImage.height;
        } else {
          const percent = parseInt(document.getElementById("percentInput").value) / 100;
          newWidth = Math.round(originalImage.width * percent);
          newHeight = Math.round(originalImage.height * percent);
        }

        // Simulate processing time for better UX
        await new Promise((resolve) => setTimeout(resolve, 300));

        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");

        canvas.width = newWidth;
        canvas.height = newHeight;

        // High-quality rendering
        ctx.imageSmoothingEnabled = true;
        ctx.imageSmoothingQuality = "high";
        ctx.drawImage(originalImage, 0, 0, newWidth, newHeight);

        // Get format and quality
        const format = document.getElementById("formatSelect").value;
        const quality = format === "image/jpeg" ? document.getElementById("qualitySlider").value / 100 : 1;

        // Generate result
        const dataURL = canvas.toDataURL(format, quality);

        // Update preview
        document.getElementById("processedPreview").src = dataURL;
        document.getElementById("processedPreview").style.display = "block";

        // Setup download
        const downloadBtn = document.getElementById("downloadBtn");
        downloadBtn.href = dataURL;
        downloadBtn.download = generateFileName(format);
        downloadBtn.style.display = "block";

        // Calculate new file size (approximate)
        const newSize = Math.round(((dataURL.length - dataURL.indexOf(",") - 1) * 3) / 4);

        // Update processed info
        document.getElementById("processedInfo").innerHTML = `${formatBytes(newSize)}<br>${newWidth} × ${newHeight}px`;

        // Add to history
        const reduction = Math.round((1 - newSize / originalFile.size) * 100);
        addToHistory({
          original: `${originalImage.width}×${originalImage.height}`,
          processed: `${newWidth}×${newHeight}`,
          reduction: reduction,
          timestamp: new Date().toLocaleString(),
        });

        showLoading(false);

        // Track successful processing
        const processingTime = performance.now() - startTime;
        if (typeof gtag !== 'undefined') {
          gtag('event', 'image_processed', {
            'event_category': 'conversion',
            'processing_time': Math.round(processingTime),
            'original_size': originalFile.size,
            'new_size': newSize,
            'reduction_percent': reduction,
            'output_format': format
          });
        }

      } catch (error) {
        showError(translations[lang].errorProcessing);
        showLoading(false);

        // Track errors
        if (typeof gtag !== 'undefined') {
          gtag('event', 'processing_error', {
            'event_category': 'error',
            'error_message': error.message
          });
        }
      }
    }

    // Utility functions
    function showLoading(show) {
      document.getElementById("loading").style.display = show ? "block" : "none";
      document.getElementById("processBtn").disabled = show;
    }

    function showError(message) {
      const errorEl = document.getElementById("errorMessage");
      errorEl.textContent = message;
      errorEl.style.display = "block";
      errorEl.focus(); // For accessibility
    }

    function hideError() {
      document.getElementById("errorMessage").style.display = "none";
    }

    function formatBytes(bytes) {
      if (bytes === 0) return "0 Bytes";
      const k = 1024;
      const sizes = ["Bytes", "KB", "MB", "GB"];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i];
    }

    function generateFileName(format) {
      const ext = format.split("/")[1];
      const baseName = originalFile.name.split(".")[0];
      return `${baseName}_resized.${ext}`;
    }

    function updateImageInfo() {
      const t = translations[lang];
      if (!originalImage) {
        document.getElementById("originalInfo").textContent = t.infoNoImage;
        document.getElementById("processedInfo").textContent = t.infoWaiting;
      } else {
        document.getElementById("originalInfo").innerHTML = `${formatBytes(originalFile.size)}<br>${originalImage.width} × ${originalImage.height}px`;
      }
    }

    function addToHistory(item) {
      processHistory.unshift(item);
      if (processHistory.length > 5) processHistory.pop();

      const historyEl = document.getElementById("history");
      const historyList = document.getElementById("historyList");

      historyList.innerHTML = processHistory.map(
        (h) => `<div class="history-item">
            <div>${h.original} → ${h.processed}</div>
            <div>${h.reduction > 0 ? "-" + h.reduction + "%" : "+"} | ${h.timestamp}</div>
          </div>`
      ).join("");

      historyEl.style.display = "block";
    }

    // Enhanced keyboard shortcuts
    document.addEventListener("keydown", function (e) {
      if (e.key === "Enter" && !document.getElementById("processBtn").disabled) {
        processImage();
      }
      if (e.key === "Escape") {
        hideError();
      }
    });

    // Page visibility API for performance tracking
    document.addEventListener('visibilitychange', function () {
      if (document.visibilityState === 'visible' && typeof gtag !== 'undefined') {
        gtag('event', 'page_view', {
          'event_category': 'engagement'
        });
      }
    });

    // Initialize with performance optimizations
    document.addEventListener('DOMContentLoaded', function () {
      setLanguage("en");

      // Lazy load non-critical elements
      setTimeout(() => {
        // Initialize any non-critical features here
      }, 1000);
    });

    // Service Worker registration for PWA capabilities (optional)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function () {
        navigator.serviceWorker.register('/sw.js').then(function (registration) {
          console.log('SW registered: ', registration);
        }).catch(function (registrationError) {
          console.log('SW registration failed: ', registrationError);
        });
      });
    }
  </script>
</body>
</html>